<div [ngbPopover]="popContent" popoverTitle="Try Search" #trySearch="ngbPopover"
     placement="bottom" triggers="manual" class="popover-anchor" style="width: 100%">
</div>

<ng-template #popContent >Try
  <a routerLink="/search" [queryParams]="{q_cta: 'popover',q_source:'scholarships_list'}"><b> Search</b></a>.
  Enter your term and find matching scholarships. <a (click)="toggleSearchModal({'toggle':true})">Close</a></ng-template>
<div class="container-fluid">


  <div class="background-image" >
    <div class="preview-form container row">
      <form #previewForm="ngForm" (ngSubmit)="onSubmit(previewForm)" class="col-sm-12 white-placeholder white-underline">

        <h1 style="margin-bottom: 0" class="form-header">Find Your Scholarships</h1>
        <h2 class="form-header" style="margin-bottom: 0;font-size: larger;">Easily find and apply to scholarships.
        <br>The Right Way</h2>
        <h4 *ngIf="model.errors" class="form-header" style="margin-bottom: 0;font-size: x-large;">
          {{model.errors}}
        </h4>
        <div *ngIf="model.previewMode=='universalSearch'" style="margin-bottom: -22px; font-size: x-large" class="row preview-questions">

          <div class="search-box">
            <!--<mat-form-field class="col-sm-12">-->
              <!--<input style="font-size: 50px; caret-color: white" matInput placeholder="Enter a Search Term" [(ngModel)]="model.searchString" name="searchString" autofocus>-->
            <!--</mat-form-field>-->

            <div class="col-sm-12 input-field">
              <app-typeahead [(model)]="model.searchString" [dataset]="MASTER_LIST_EVERYTHING"
                             [inputStyles]="{'font-size':'50px', 'caret-color': 'white', 'color': 'white'}"
                             [metadata]="{'placeholder':'Enter a search term', 'key': 'searchString','disableFocusFirst': true, 'matInput': true, 'noPlaceHolder': true}"
                             [labelStyles]="{'font-size':'50px', 'caret-color': 'white', 'color': 'white'}"
                              (typeaheadSelectedEvent)="typeaheadEvent($event)">
              </app-typeahead>
            </div>
            <div class="col-sm-12">
              <p style="color: white">Sample Searches:
                <ng-container *ngFor="let searchTerm of sampleSearches; last as isLast">
                  <a routerLink="/scholarship" [queryParams]="{q:searchTerm.toLowerCase()}"
                     (click)="$event.preventDefault();
                      model.searchString=searchTerm.toLowerCase();
                      onSubmit(previewForm)">
                    {{searchTerm}}</a>
                  <ng-container *ngIf="!isLast">,</ng-container>
                </ng-container>

              </p>
            </div>

          </div>

        </div>

        <div *ngIf="model.previewMode=='classicFilter'" style="margin-bottom: -22px; font-size: x-large" class="row preview-questions">

          <!-- Try using Google Maps Places Autocomplete API: https://developers.google.com/maps/documentation/javascript/places-autocomplete#address_forms -->
          <!-- https://stackoverflow.com/questions/42341930/google-places-autocomplete-angular2 -->
          <mat-form-field class="browser-default col-sm-12 col-md-4 location-div">
            <!-- <input matInput [(ngModel)]="model.city[0]" name="city" id="city" required placeholder="City"> -->
            <input matInput type="text" class="form-control" style="padding-bottom: 1.37%" inputStyle="" required [placeholder]="locationPlaceHolder" name="location" id="location" [(ngModel)]="model.location.name" #LocationCtrl="ngModel"
                   appGooglePlace (setAddress)="placeAutoComplete($event,LocationCtrl)"  (googlePlaceNoLoad)="googlePlaceNoLoad()" (keydown)="keyDownHandler($event)" >
          </mat-form-field>

          <mat-form-field class="form-group input-field col-sm-12 col-md-4">
            <mat-select [(ngModel)]="model.education_level" name="education_level" id="education_level" multiple=true required placeholder="Education Level">
              <mat-option *ngFor="let level of EDUCATION_LEVEL" [value]="level">{{level}} </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="form-group input-field col-sm-12 col-md-4">
            <mat-select [(ngModel)]="model.education_field" name="education_field" id="education_field" multiple=true required placeholder="Education Field">
              <mat-option *ngFor="let field of EDUCATION_FIELD" [value]="field">{{field}} </mat-option>
            </mat-select>
          </mat-form-field>

        </div>
        <br>
        <!--<mat-slide-toggle (change)="model.previewMode = model.previewMode=='classicFilter'? 'universalSearch': 'classicFilter'" checked="true">-->
          <!--<span class="white-text">-->
          <!--Preview Mode:-->
          <!--<strong>-->
            <!--{{prettifyKeys(model.previewMode)}}-->
          <!--</strong>-->
          <!--</span>-->
        <!--</mat-slide-toggle>-->

        <div class="" style="text-align: center;">
          <button class=" col-sm-8 offset-sm-2 waves-effect waves-light btn scholarship-btn" type="submit">Get My Scholarships</button>
          <a class=" col-sm-8 waves-effect waves-light btn scholarship-btn" routerLink="/applications/demo" style="padding-top: 1.2em; color: white">Try The Live Demo</a>
        </div>
        <br>

      </form>
    </div>
  </div>

  <!-- How it Works-->
  <div class="container">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"><a routerLink="/blog"> How it Works </a></h1>
    <h5 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> <a routerLink="register">Make an account.</a> Find Scholarships. Apply </h5>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>1. Make an Account ğŸ‘†ğŸ½</h3>
        <p><a routerLink="register">Register</a> for a free account in 15 seconds.</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/registration.gif"
             alt="Atila Registration Walkthrough" title="Atila Registration Walkthrough"
             class="landing-page-gif landing-page-gif-desktop">
      </div>
    </div>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>2. Create Your Profile ğŸ™ğŸ¾â€â™€ï¸</h3>
        <p>Tell us the schools and programs you are interested in.</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/create-profile.gif"
             alt="Create Your Profile" title="Create Your Profile"
             class="landing-page-gif landing-page-gif-mobile">
      </div>
    </div>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>3. Find Your Scholarships ğŸ‘€</h3>
        <p>Get matched with scholarships that are customized just for you based on your profile.</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/view-scholarships.gif"
             alt="Find Your Scholarships" title="Find Your Scholarships"
             class="landing-page-gif landing-page-gif-mobile">
      </div>
    </div>
  </div>
  <hr/>

  <!-- More Features-->
  <div class="container">
    <h1 style="margin-top: 0; text-align: center" class="col-col-sm-12 atila-blue"><a routerLink="/blog"> More Features </a></h1>
    <h5 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue">
      Stay Woke. <a routerLink="essay">Read Essays. </a> <a routerLink="applications/demo">Automate Applications.</a></h5>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>1. Get Notified when Scholarships are Due ğŸ•</h3>
        <p>Save scholarships you are interested in and we'll let you know 7 days and 24 hours before the scholarship is due.</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/view-scholarships.gif"
             alt="Get Notified when Scholarships are Due" title="Get Notified when Scholarships are Due"
             class="landing-page-gif landing-page-gif-mobile">
      </div>
    </div>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>2. Read Other student's <a routerLink="essay">Essays</a> ğŸ‘«</h3>
        <p>Read <a routerLink="essay">essays and past applications</a> from other students for scholarships and schools you are interested in.</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/registration.gif"
             alt="Read Other student's Essays" title="Read Other student's Essays"
             class="landing-page-gif landing-page-gif-mobile">
      </div>
    </div>
    <div class="row">
      <div class="card col-lg-4 col-sm-12">
        <h3>3. <a routerLink="applications/demo">Automate</a> Scholarship Application ğŸ’ªğŸ¼</h3>
        <p>Automate the form filling process for web and pdf scholarship applications. Atila will even write your application email for you. ğŸ˜¯</p>
      </div>
      <div class="card col-lg-8 col-sm-12">

        <img src="../../assets/img/landing-page/registration.gif"
             alt="Automate Scholarship Application" title="Automate Scholarship Application"
             class="landing-page-gif landing-page-gif-mobile">
      </div>
    </div>
  </div>
  <hr/>

  <!-- Blog Posts Demo-->
  <div class="container row">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"><a routerLink="/blog"> Blog </a></h1>
    <h5 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Learn from other students' stories </h5>
    <div class="row">
      <div  *ngFor="let blog of blogs; let i = index; first as isFirst;" class="col-md-4">
          <app-card-generic [item]="blog" [metadata]="{hideDescription: blog.image, showImageInPreviewMode: true}"
                            [cardStyle]="{'height': '450px', 'overflow-y': 'hidden'}"> </app-card-generic>
      </div>
    </div>
  </div>
  <hr/>

  <!-- Essay Posts Demo-->
  <div class="container row">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"><a routerLink="/essay"> Essays </a></h1>
    <h5 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Read the essays that got students acceptance to top schools and win major scholarships. </h5>
    <div class="row">
      <div  *ngFor="let essay of essays; let i = index; first as isFirst;" class="col-md-4">
        <app-card-generic [item]="essay" [metadata]="{hideDescription: essay.image, showImageInPreviewMode: true}"
                          > </app-card-generic>
      </div>
    </div>
  </div>
  <hr/>

  <!--Youtube video demo-->
  <div class="container row">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Live Demo </h1>
    <div class="videowrapper col-sm-12 center-block">
      <!--lazy iframe src w/jquery-->
      <iframe class="lazy-load-element" src="" width="560" height="314"
              allowfullscreen="allowfullscreen">
      </iframe>
    </div>
  </div>
  <hr/>

  <div class="row center" style="text-align: center; margin-bottom: 1%; margin-top: 1%">
    <p style="font-size: medium" class="col-sm-12 col-md-6">Subscribe to get updates on new <a routerLink="/">scholarships</a>, <a routerLink="/blog">blog</a> and
      <a routerLink="/forum">forum posts</a>, and new product features.

      <span *ngIf="subscriber.response" style="color: green">
        <br>
        {{subscriber.response}}
      </span>
    </p>

    <mat-form-field class="browser-default col-sm-12 col-md-5 dark-placeholder">
      <!-- <input matInput [(ngModel)]="model.city[0]" name="city" id="city" required placeholder="City"> -->
      <input matInput type="email" class="form-control" style="padding-bottom: 0; margin-bottom: 0; color: #194F87"  name="email" id="emailid"
             placeholder="Email Address" email [(ngModel)]="subscriber.email" (keyup.enter)="addSubscriber($event)">
    </mat-form-field>
    <a class="waves-effect waves-light btn browser-default col-md-5 col-sm-12 offset-md-6" style="background-color:#4080ff; width: 90%"
       (click)="addSubscriber()">Subscribe</a>

  </div>
</div>
