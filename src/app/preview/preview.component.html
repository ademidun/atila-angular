<div [ngbPopover]="popContent" popoverTitle="Try Search" #trySearch="ngbPopover"
     placement="bottom" triggers="manual" class="popover-anchor" style="width: 100%">
</div>

<ng-template #popContent >Try
  <a routerLink="/search" [queryParams]="{q_cta: 'popover',q_source:'scholarships_list'}"><b> Search</b></a>.
  Enter your term and find matching scholarships. <a (click)="toggleSearchModal({'toggle':true})">Close</a></ng-template>
<div class="container-fluid">


  <div class="background-image" >
    <div class="preview-form container row">
      <form #previewForm="ngForm" (ngSubmit)="onSubmit(previewForm)" class="col-sm-12">

          <h1 style="margin-bottom: 0" class="form-header">Find Your Scholarships</h1>
          <h2 class="form-header" style="margin-bottom: 0;font-size: larger;">Automatically find and apply to scholarships in one click.</h2>
          <div style="margin-bottom: -22px; font-size: x-large" class="row preview-questions white-placeholder">

            <!-- Try using Google Maps Places Autocomplete API: https://developers.google.com/maps/documentation/javascript/places-autocomplete#address_forms -->
            <!-- https://stackoverflow.com/questions/42341930/google-places-autocomplete-angular2 -->
            <mat-form-field class="browser-default col-sm-12 col-md-4 location-div">
              <!-- <input matInput [(ngModel)]="model.city[0]" name="city" id="city" required placeholder="City"> -->
              <input matInput type="text" class="form-control" style="padding-bottom: 0" inputStyle="" required [placeholder]="locationPlaceHolder" name="location" id="location" [(ngModel)]="model.location.name" #LocationCtrl="ngModel"
                     appGooglePlace (setAddress)="placeAutoComplete($event,LocationCtrl)"  (googlePlaceNoLoad)="googlePlaceNoLoad()" (keydown)="keyDownHandler($event)" >
            </mat-form-field>

            <mat-form-field class="form-group input-field col-sm-12 col-md-4">
              <mat-select [(ngModel)]="model.education_level" name="education_level" id="education_level" multiple=true required placeholder="Education Level">
                <mat-option *ngFor="let level of EDUCATION_LEVEL" [value]="level">{{level}} </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field class="form-group input-field col-sm-12 col-md-4">
              <mat-select [(ngModel)]="model.education_field" name="education_field" id="education_field" multiple=true required placeholder="Education Field">
                <mat-option *ngFor="let field of EDUCATION_FIELD" [value]="field">{{field}} </mat-option>
              </mat-select>
            </mat-form-field>

          </div>
        <br>
        <p *ngIf="model.errors" style="color: white">
          {{model.errors}}
        </p>
        <div class="" style="text-align: center;">
          <button class=" col-sm-8 offset-sm-2 waves-effect waves-light btn scholarship-btn" type="submit">Get My Scholarships</button>
          <a class=" col-sm-8 waves-effect waves-light btn scholarship-btn" routerLink="/applications/demo" style="padding-top: 1.2em; color: white">Try The Live Demo</a>
        </div>
        <br>

      </form>
    </div>
  </div>

  <!--Youtube video demo-->
  <div class="container row">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Live Demo </h1>
    <div class="videowrapper col-sm-12 center-block">
      <!--lazy iframe src w/jquery-->
      <iframe class="lazy-load-element" src="" width="560" height="314"
              allowfullscreen="allowfullscreen">
      </iframe>
    </div>
  </div>

  <!-- Blog Posts Demo-->
  <div class="container row">
    <h1 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Blog posts </h1>
    <h5 style="margin-top: 0; text-align: center" class="col-sm-12 atila-blue"> Learn from Other studentâ€™s stories </h5>
    <div class="row">
        <div *ngFor="let blog of blogs; let i = index" class="col-lg-4 blog-box">

          <div class="card">
            <div class="card-content ">
              <span class="card-title responsive-height">
                <a routerLink="/blog/{{blog.user.username}}/{{blog.slug}}">{{blog.title | truncate:75}}</a>
                <span *ngIf="!blog.published" style=" font-size: medium; font-weight: bold; ">Unpublished</span>
              </span>
              <span *ngIf="blog.user">
                <a routerLink="/profile/{{blog.user.username}}">
                  <div class="chip">
                    <img [src]="blog.user.profile_pic_url"
                         alt="Authorr">
                    <a routerLink="/profile/{{blog.user.username}}">
                    {{blog.user.first_name}} {{blog.user.last_name}}
                    </a>
                  </div>
                </a>
              </span>
            </div>

            <div class="card-image">
              <a routerLink="/blog/{{blog.user.username}}/{{blog.slug}}">
                <img [src]="blog.header_image_url">
              </a>
            </div>
            <div class="card-content ">
              <p style="font-size: larger">{{blog.description| truncate:280}}</p>
            </div>

            <div class="card-action">
              <a (click)="likeContent(blog)" [ngStyle]="{'background-color': blog.alreadyLiked ? '#4080FF' : 'transparent'}"
                 class="btn-floating halfway-fab waves-effect waves-light left interactive-btn" style="left: 15px; bottom: 10px">
                <mat-icon class="material-icons interactive-icon md-36"  [ngStyle]="{'color': blog.alreadyLiked ? 'white' : '#4080FF'}"
                          svgIcon="thumb-up-outline"></mat-icon></a>
              <a routerLink="/blog/{{blog.user.username}}/{{blog.slug}}" class="btn-floating halfway-fab waves-effect waves-light left"
                 style="left: 70px; bottom: 10px">
                <p class="btn-text">{{blog.up_votes_count}}</p>
              </a>
              <a  routerLink="/blog/{{blog.user.username}}/{{blog.slug}}" class="btn-floating halfway-fab waves-effect waves-light left" style="left: 125px; bottom: 10px">
                <i class="material-icons md-36">comment</i></a>
              <a routerLink="/blog/{{blog.user.username}}/{{blog.slug}}" class="btn-floating halfway-fab waves-effect waves-light left"
                 style="left: 180px; bottom: 10px">
                <p class="btn-text">{{blog.metadata['comments_count']}}</p>
              </a>
              <app-share-item [item]="{title: blog.title,
                url:'https://atila.ca/blog/'+blog.user.username+'/'+blog.slug+'/',
                id: blog.id, source:'blog_list',type:'blog'}" [metadata]="{'shareItemStyle': {'left': '225px','bottom': '10px'} }"></app-share-item>

            </div>
          </div>

        </div>
    </div>
  </div>

  <div class="row center" style="text-align: center; margin-bottom: 1%; margin-top: 1%">
    <p style="font-size: medium" class="col-sm-12 col-md-6">Subscribe to get updates on new <a routerLink="/">scholarships</a>, <a routerLink="/blog" style="text-decoration: underline; color: #68b9ff">blog</a> and
      <a routerLink="/forum" style="text-decoration: underline; color: #68b9ff">forum posts</a>, and new product features.

      <span *ngIf="subscriber.response" style="color: green">
        <br>
        {{subscriber.response}}
      </span>
    </p>

    <mat-form-field class="browser-default col-sm-12 col-md-5 dark-placeholder">
      <!-- <input matInput [(ngModel)]="model.city[0]" name="city" id="city" required placeholder="City"> -->
      <input matInput type="email" class="form-control" style="padding-bottom: 0; margin-bottom: 0; color: #194F87"  name="email" id="emailid"
             placeholder="Email Address" email [(ngModel)]="subscriber.email" (keyup.enter)="addSubscriber($event)">
    </mat-form-field>
    <a class="waves-effect waves-light btn browser-default col-md-5 col-sm-12 offset-md-6" style="background-color:#4080ff; width: 90%"
       (click)="addSubscriber()">Subscribe</a>

  </div>
</div>

