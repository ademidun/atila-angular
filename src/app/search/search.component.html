<div class="container">
    <div class=" card row">
      <mat-form-field class="col s9">
      <input matInput class="browser-default" id="search" type="text"
             required [(ngModel)]="query" name="search" placeholder="Enter to search" (keyup.enter)="search(query)">
      </mat-form-field>

      <a  class="waves-effect waves-light btn col s1" (click)="search(query)">
        <i class="material-icons automate-tag">search</i>
      </a>

      <div  *ngIf="isSearching" class="col s10">
        <p style="font-size: large">Searching...</p>
        <mat-progress-bar aria-label="Searching..." mode="indeterminate"></mat-progress-bar>
      </div>

    </div>


    <!--Scholarship Results -->
    <div class=" card row">
      <h4>Scholarships</h4>

      <div class="row">
        <div *ngFor=" let scholarship of searchResults.scholarships" class="col s12 m7">
          <div class="card small">
            <div class="card-title">
              <a [routerLink]="['../scholarship-detail', scholarship.slug]"> {{scholarship.name}}</a>
            </div>
            <div class="card-content">
              <p>{{scholarship.description | truncate:280}}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row center"  *ngIf="!isRegistered">
        <p>Some results may be omitted, <a routerLink="/register">register</a>  to see all results</p>
        <a class="waves-effect waves-light btn scholarship-btn" routerLink="/register">Register</a>
      </div>

      <div class="row center"  *ngIf="isRegistered">
        <p>There are more results, try a more specific search.</p>
      </div>
    </div>

    <!--Blog Results -->
    <div class=" card row">
      <h4>Blogs</h4>

      <div class="row">
        <div *ngFor=" let blogPost of searchResults.blogPosts" class="col s12 m7">
          <div class="card small">
            <div class="card-title">
              <a routerLink="/blog/{{blogPost.user.username}}/{{blogPost.slug}}"> {{blogPost.title}}</a>
            </div>
            <div class="card-image">
              <a routerLink="/blog/{{blogPost.user.username}}/{{blogPost.slug}}">
                <img [src]="blogPost.header_image_url" >
              </a>

            </div>
            <div class="card-content">
              <p class="card-text" *ngIf="blogPost.description">
                {{((blogPost.description.length>140)? (blogPost.description | slice:0:140)+'...':(blogPost.description) )}}
              </p>
            </div>
          </div>
        </div>
      </div>


      <div class="row center"  *ngIf="!isRegistered" >
        <p>Some results may be omitted, <a routerLink="/register">register</a>  to see all results</p>
        <a class="waves-effect waves-light btn scholarship-btn" routerLink="/register">Register</a>
      </div>

      <div class="row center"  *ngIf="isRegistered && searchResults.metadata && searchResults.metadata.blogPosts && searchResults.metadata.blogPosts.omit_results">
        <p>There are more results, try a more specific search.</p>
      </div>

    </div>

    <!--Forum Results -->
    <div class=" card row">
      <h4>Forums</h4>

      <div class="row">
        <div class="col s12 m7" *ngFor="let forum of this.searchResults.forums; let i = index">
          <div class="card ">
            <div class="card-content ">
              <span class="card-title"><a routerLink="/forum/{{forum.slug}}">{{forum.title | truncate:50}}</a></span>
              <p>{{forum.starting_comment.text | truncate:280}}</p>
            </div>
            <div class="card-action">
              <a routerLink="/forum/{{forum.slug}}" style="color: #039be5">See Forum</a>
            </div>
          </div>
        </div>
      </div>

        <div class="row center"  *ngIf="!isRegistered">
          <p>Some results may be omitted, <a routerLink="/register">register</a>  to see all results</p>
          <a class="waves-effect waves-light btn scholarship-btn" routerLink="/register">Register</a>
        </div>


      <div class="row center"  *ngIf="isRegistered && searchResults.metadata && searchResults.metadata.forums &&  searchResults.metadata.forums.omit_results">
        <p>There are more results, try a more specific search.</p>
      </div>
    </div>



</div>
